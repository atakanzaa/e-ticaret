{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "OrderCreatedEvent",
  "required": ["eventId", "eventType", "occurredAt", "order"],
  "properties": {
    "eventId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for this event"
    },
    "eventType": {
      "type": "string",
      "const": "order.created",
      "description": "Type of the event"
    },
    "occurredAt": {
      "type": "string",
      "format": "date-time",
      "description": "ISO-8601 timestamp when the event occurred"
    },
    "order": {
      "type": "object",
      "required": ["orderId", "email", "items", "total", "currency"],
      "properties": {
        "orderId": {
          "type": "string",
          "format": "uuid",
          "description": "Unique identifier for the order"
        },
        "userId": {
          "type": ["string", "null"],
          "format": "uuid",
          "description": "User ID if logged in, null for guest checkout"
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Customer email address"
        },
        "items": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["productId", "qty", "unitPrice"],
            "properties": {
              "productId": {
                "type": "string",
                "format": "uuid"
              },
              "qty": {
                "type": "integer",
                "minimum": 1
              },
              "unitPrice": {
                "type": "number",
                "minimum": 0
              }
            }
          }
        },
        "total": {
          "type": "number",
          "minimum": 0,
          "description": "Total order amount"
        },
        "currency": {
          "type": "string",
          "enum": ["TRY", "USD", "EUR"],
          "default": "TRY"
        }
      }
    }
  }
}
